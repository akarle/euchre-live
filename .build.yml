# .build.yml -- builds.sr.ht CI/CD
image: debian/stable
packages:
    - nodejs
    - npm
    - rsync
    - cpanminus
    - rsync
sources:
    - https://git.sr.ht/~akarle/euchre-live
secrets:
    - 923b614a-772e-472a-b9d5-e742fc0697c0
environment:
    PERL5LIB: /home/build/perl5/lib/perl5
tasks:
    - setup: |
        cd euchre-live
        npm install
        cpanm --installdeps .
    - build: |
        cd euchre-live
        make build
    - test: |
        cd euchre-live
        make test
    - deploy: |
        cd euchre-live
        make release
